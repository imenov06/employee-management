# Система управления сотрудниками

## Обзор проекта

Данное приложение представляет собой консольную систему управления базой данных сотрудников с использованием SQLite. Система предоставляет функциональность для создания базы данных, добавления сотрудников, генерации тестовых данных, а также демонстрирует методы оптимизации SQL-запросов с существенным улучшением производительности.

## Структура проекта

Проект построен с использованием объектно-ориентированного подхода и включает следующие компоненты:

- `app.py` - основной исполняемый файл приложения
- `modes.py` - класс, содержащий режимы работы приложения
- `database.py` - класс для работы с базой данных SQLite
- `employee.py` - класс для представления сотрудника и операций с ним

## Требования

- Python 3.6 или выше
- SQLite3 (встроен в Python)
- Стандартные библиотеки: datetime, time, sys, random (все встроены в Python)

## Установка

1. **Установка Python** (если не установлен):


2. **Получение исходного кода**:
   ```bash
   git clone https://github.com/imenov06/employee-management.git
   cd employee-management
   ```
   или скачайте и распакуйте ZIP-архив с кодом проекта

3. **Запуск программы**:
   - В Windows: `python app.py <режим> [аргументы]`
   - В Linux: `python3 app.py <режим> [аргументы]`

## Использование

Приложение запускается из командной строки с указанием режима работы и необходимых параметров:

```bash
python app.py <режим> [аргументы]  # для Windows
python3 app.py <режим> [аргументы] # для Linux
```

### Доступные режимы

1. **Создание таблицы**
   ```bash
   python app.py 1
   ```

2. **Добавление сотрудника**
   ```bash
   python app.py 2 "Ivanov Ivan Ivanovich" 1990-01-15 Male
   ```

3. **Вывод всех сотрудников**
   ```bash
   python app.py 3
   ```

4. **Генерация случайных данных**
   ```bash
   python app.py 4
   ```

5. **Тест производительности запросов**
   ```bash
   python app.py 5
   ```

6. **Оптимизация базы данных и тест улучшения производительности**
   ```bash
   python app.py 6
   ```

## Подробное описание режимов работы

### Режим 1: Создание таблицы

Создаёт в файле `employees.db` таблицу для хранения данных о сотрудниках. Если таблица уже существует, никаких изменений не производится.

### Режим 2: Добавление сотрудника

Позволяет добавить в базу данных информацию о сотруднике. Требуются следующие параметры:
- ФИО (в кавычках)
- Дата рождения в формате YYYY-MM-DD
- Пол (Male/Female)

Приложение автоматически вычисляет возраст сотрудника на основе даты рождения.

### Режим 3: Вывод всех сотрудников

Выводит отсортированный по ФИО список всех сотрудников из базы данных с указанием их возраста. Если записей много, вывод может занять продолжительное время.

### Режим 4: Генерация случайных данных

Генерирует и добавляет в базу данных 1,000,000 случайных сотрудников, а также дополнительно 100 сотрудников-мужчин с фамилией, начинающейся на букву "F". Эти данные используются для тестирования производительности в режимах 5 и 6.

### Режим 5: Тест производительности

Выполняет SQL-запрос для выборки всех сотрудников-мужчин, чья фамилия начинается на букву "F", и измеряет время выполнения запроса. Выводит первые 10 найденных сотрудников и общее количество результатов.

### Режим 6: Оптимизация базы данных

Демонстрирует технику оптимизации SQL-запросов. Сначала измеряется производительность базового запроса, затем выполняется оптимизация базы данных путём создания индекса и увеличения размера кэша. После этого измеряется производительность оптимизированного запроса и вычисляется процент улучшения.

## Особенности оптимизации

В режиме 6 применяются следующие методы оптимизации:

1. **Увеличение размера кэша SQLite** (`PRAGMA cache_size = 20000`)
   - Позволяет SQLite хранить больше данных в оперативной памяти
   - Значительно сокращает количество обращений к диску

2. **Создание индекса** по полям gender и full_name
   - Позволяет быстро находить нужные записи без полного сканирования таблицы
   - Особенно эффективно для выборки небольшого подмножества записей из большой таблицы

3. **Использование оператора GLOB вместо LIKE**
   - GLOB обычно работает быстрее, чем LIKE для простых шаблонов
   - Снижает нагрузку на процессор при обработке строк

4. **Оптимизация обработки дат**
   - Применение более эффективного алгоритма парсинга даты
   - Сокращение времени обработки результатов запроса

**Результаты оптимизации:**
- Время выполнения запроса до оптимизации: ~0.39 секунд
- Время выполнения запроса после оптимизации: ~0.15 секунд
- Улучшение производительности: 61.72%

## Заключение

Данное приложение демонстрирует не только основы работы с базами данных с использованием Python и SQLite, но и показывает важность и эффективность методов оптимизации запросов. Даже относительно простые техники могут дать значительное улучшение производительности, что критически важно при работе с большими объемами данных.

